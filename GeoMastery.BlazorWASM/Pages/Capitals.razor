@page "/capitals"

@using GeoMastery.BlazorWASM.Dto
@using GeoMastery.Domain.Models
@inject HttpClient Http

<PageTitle>Capitals of the World</PageTitle>

<h3>Capitals</h3>
@foreach(CountryCapitalJsonDto capital in capitals)
{
    <p>@capital.Country - @capital.Capital</p>
}

@code {
    private List<CountryCapitalJsonDto> capitals = new List<CountryCapitalJsonDto>();

    protected override async Task OnInitializedAsync()
    {
        var capitalArray = await Http.GetFromJsonAsync<CountryCapitalJsonDto[]>("sample-data/capitals.json");
        capitals = capitalArray.ToList<CountryCapitalJsonDto>();
    }
}
